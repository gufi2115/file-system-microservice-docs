{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Index","text":""},{"location":"#microservice-for-efficient-and-secure-management-of-static-files","title":"Microservice for efficient and secure management of static files","text":"<p>The architecture is based on Nginx, which is responsible for directly serving files to clients. Django REST Framework handles authorization and file upload operations. UUID, file size, MIME type, path is stored in a PostgreSQL database. Each component runs in a separate Docker container.</p>"},{"location":"#key-featured","title":"Key featured","text":""},{"location":"#high-performance-serving","title":"High-performance serving","text":"<p>Utilizes the X-Accel-Redirect mechanism. After successful authorization, the API returns a response containing the X-Accel-Redirect header with an internal path. Nginx then serves the file directly from disk, completely bypassing Python workers and significantly reducing their load.</p>"},{"location":"#storage-layout","title":"Storage layout","text":"<p>Files are saved on disk using two-level sharding based on UUID (e.g. /12/34/123456...jpeg). This approach prevents performance degradation of the filesystem when storing a very large number of files.</p>"},{"location":"#security","title":"Security","text":"<p>API access is protected using API KEY authentication.</p>"},{"location":"#scalability","title":"Scalability","text":"<p>By offloading file transfer to Nginx, the service can handle high traffic with very low resource usage on the application side (minimal CPU/memory consumption of Python workers).</p>"},{"location":"#integration-package","title":"Integration package","text":"<p>Additionally, I created a package that facilitates integration with the microservice. File system pack</p>"},{"location":"#git-repositories","title":"Git repositories","text":""},{"location":"#microservice","title":"Microservice","text":"<p>https://github.com/gufi2115/Microservice-to-save-files</p>"},{"location":"#file-system-pack","title":"File system pack","text":"<p>https://github.com/gufi2115/filesystem-integration</p>"},{"location":"Architecture/","title":"Architecture","text":""},{"location":"Architecture/#microservice-architecture","title":"Microservice Architecture","text":""},{"location":"How%20to%20start/","title":"How to start","text":""},{"location":"How%20to%20start/#how-to-install","title":"How to install:","text":"<pre><code>  git clone https://github.com/gufi2115/Microservice-to-save-files.git\n</code></pre> <pre><code>  cd Microservice-to-save-files/\n</code></pre> <pre><code>  nano .env\n</code></pre> <p>paste it:</p> <pre><code>SECRET_KEY=\nDATABASE_NAME=\nDATABASE_USER=\nDATABASE_PASSWORD=\nDATABASE_HOST=\nDATABASE_PORT=\nAPI_KEY=\nHOST=\nAPI_PORT=\nDEBUG=true/false\nSWAGGER_DOCUMENTATION=true/false\n</code></pre> <pre><code>  docker compose up --build \n</code></pre>"},{"location":"How%20to%20start/#endpoints","title":"Endpoints","text":""},{"location":"How%20to%20start/#post-file","title":"Post file","text":"<pre><code> Post /api/file/\n</code></pre> Name Type Required <code>file</code> <code>file</code> Required in header. Authorization: f\"api-key {API_KEY}\""},{"location":"How%20to%20start/#get-item","title":"Get item","text":"<pre><code>  GET /api/file/{id}/\n</code></pre> Name Type Required <code>file</code> <code>file</code> Required in header. Authorization: f\"api-key {API_KEY}\""},{"location":"How%20to%20start/#delete-item","title":"Delete item","text":"<pre><code>  DELETE /api/file/{id}/\n</code></pre>"},{"location":"How%20to%20start/#docs-openapi","title":"Docs OpenAPI","text":"<p>If you have SWAGGER_DOCUMENTATION on True</p> <pre><code>    /api/docs/swagger/\n    /api/docs/redoc/\n</code></pre>"},{"location":"pl/","title":"Indeks","text":""},{"location":"pl/#mikroserwis-do-wydajnego-i-bezpiecznego-zarzadzania-plikami-statycznymi","title":"Mikroserwis do wydajnego i bezpiecznego zarz\u0105dzania plikami statycznymi","text":"<p>Architektura opiera si\u0119 na Nginx, kt\u00f3ry odpowiada za bezpo\u015brednie serwowanie plik\u00f3w do klienta. Django REST Framework odpowiada za autoryzacj\u0119 i zapisywaniem plik\u00f3w.  Baza danych Postgresql przetrzymuje informacj\u0119 o uuid, wielko\u015bci, typie oraz \u015bcie\u017cce pliku. Ka\u017cdy komponent dzia\u0142a w osobnym kontenerze Docker.</p>"},{"location":"pl/#kluczowe-cechy","title":"Kluczowe cechy:","text":""},{"location":"pl/#wysoka-wydajnosc-serwowania","title":"Wysoka wydajno\u015b\u0107 serwowania","text":"<p>Wykorzystanie mechanizmu X-Accel-Redirect. API po pozytywnej weryfikacji uprawnie\u0144 zwraca nag\u0142\u00f3wek z wewn\u0119trzn\u0105 \u015bcie\u017ck\u0105, a Nginx serwuje plik bezpo\u015brednio z dysku, odci\u0105\u017caj\u0105c workery Pythona.</p>"},{"location":"pl/#struktura-przechowywania","title":"Struktura przechowywania","text":"<p>Pliki s\u0105 zapisywane na dysku z wykorzystaniem dwupoziomowego fragmentowania na podstawie UUID (np. /12/34/12345...jpeg). Zapobiega to problemom z wydajno\u015bci\u0105 systemu plik\u00f3w przy ogromnej liczbie obiekt\u00f3w.</p>"},{"location":"pl/#bezpieczenstwo","title":"Bezpiecze\u0144stwo","text":"<p>Dost\u0119p do API jest zabezpieczony za pomoc\u0105 API KEY.</p>"},{"location":"pl/#skalowalnosc","title":"Skalowalno\u015b\u0107","text":"<p>Dzi\u0119ki delegowaniu transferu do Nginxa, serwis jest w stanie obs\u0142u\u017cy\u0107 wysoki ruch przy minimalnym zu\u017cyciu zasob\u00f3w.</p>"},{"location":"pl/#paczka-do-integracji","title":"Paczka do integracji","text":"<p>Dodatkowo stworzy\u0142em paczk\u0119 u\u0142atwiaj\u0105c\u0105 integracj\u0119 z mikroserwisem. File system pack</p>"},{"location":"pl/#repozytorium-git","title":"Repozytorium Git","text":""},{"location":"pl/Architecture/","title":"Architektura","text":""},{"location":"pl/Architecture/#architektura-mikroserwisu","title":"Architektura mikroserwisu","text":""},{"location":"pl/How%20to%20start/","title":"Jak uruchomi\u0107","text":""},{"location":"pl/How%20to%20start/#jak-uruchomic","title":"Jak uruchomi\u0107","text":"<pre><code>  git clone https://github.com/gufi2115/Microservice-to-save-files.git\n</code></pre> <pre><code>  cd Microservice-to-save-files/\n</code></pre> <pre><code>  nano .env\n</code></pre> <p>Wklej to:</p> <pre><code>SECRET_KEY=\nDATABASE_NAME=\nDATABASE_USER=\nDATABASE_PASSWORD=\nDATABASE_HOST=\nDATABASE_PORT=\nAPI_KEY=\nHOST=\nAPI_PORT=\nDEBUG=true/false\nSWAGGER_DOCUMENTATION=true/false\n</code></pre> <pre><code>  docker compose up --build \n</code></pre>"},{"location":"pl/How%20to%20start/#punkty-koncowe","title":"Punkty ko\u0144cowe","text":""},{"location":"pl/How%20to%20start/#post-file","title":"Post file","text":"<pre><code> Post /api/file/\n</code></pre> Nazwa Typ Wymagane <code>file</code> <code>file</code> Wymagane w nag\u0142\u00f3wku. Authorization: f\"api-key {API_KEY}\""},{"location":"pl/How%20to%20start/#get-item","title":"Get item","text":"<pre><code>  GET /api/file/{id}/\n</code></pre> Nazwa Typ Wymagane <code>file</code> <code>file</code> Wymagane w nag\u0142\u00f3wku. Authorization: f\"api-key {API_KEY}\""},{"location":"pl/How%20to%20start/#dokumentacja-api","title":"Dokumentacja API","text":"<p>Je\u017celi masz SWAGGER_DOCUMENTATION na True</p> <pre><code>    /api/docs/swagger/\n    /api/docs/redoc/\n</code></pre>"}]}